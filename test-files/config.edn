;; config.edn - Extensible Data Notation (Clojure configuration file)
;; EDN is Clojure's data format, like JSON but more powerful

{:application
 {:name "OpenCode Web"
  :version "1.0.0"
  :environment :development
  :debug? true}

 :server
 {:host "localhost"
  :port 3000
  :ssl? false
  :max-connections 100
  :timeout-ms 30000
  :compression? true}

 :database
 {:type :postgresql
  :host "localhost"
  :port 5432
  :name "opencode_db"
  :pool-size 10
  :username "app_user"
  :password #secret "encrypted_password_here"
  :ssl-mode :require}

 :authentication
 {:enabled? true
  :providers [:github :google :email]
  :session-timeout 3600
  :jwt-secret #secret "jwt_secret_key"
  :oauth
  {:github {:client-id "github_client_id"
            :client-secret #secret "github_secret"
            :callback-url "http://localhost:3000/auth/github/callback"}
   :google {:client-id "google_client_id"
            :client-secret #secret "google_secret"
            :callback-url "http://localhost:3000/auth/google/callback"}}}

 :features
 {:file-browser {:enabled? true
                 :max-file-size-mb 10
                 :allowed-extensions #{".js" ".ts" ".clj" ".cljs" ".py" ".rb"}}
  :syntax-highlighting {:enabled? true
                       :theme :github-dark
                       :languages [:javascript :typescript :python :clojure :lisp]}
  :ai-assistant {:enabled? true
                :model "gpt-4"
                :max-tokens 4000
                :temperature 0.7}
  :live-collaboration {:enabled? false
                      :max-users-per-session 10}}

 :logging
 {:level :info
  :format :json
  :outputs [:console :file]
  :file-path "logs/app.log"
  :rotation {:max-size-mb 100
             :max-files 10}}

 :cache
 {:type :redis
  :host "localhost"
  :port 6379
  :ttl-seconds 3600
  :max-entries 10000}

 :monitoring
 {:metrics-enabled? true
  :health-check-path "/health"
  :tracing {:enabled? true
           :service-name "opencode-web"
           :sample-rate 0.1}}

 :rate-limiting
 {:enabled? true
  :requests-per-minute 100
  :burst 20}

 :cors
 {:allowed-origins ["http://localhost:3000" "http://localhost:5173"]
  :allowed-methods [:get :post :put :delete :options]
  :allowed-headers ["Content-Type" "Authorization"]
  :max-age 3600}

 :email
 {:provider :sendgrid
  :api-key #secret "sendgrid_api_key"
  :from-address "noreply@opencode.dev"
  :templates-path "resources/email-templates"}

 :storage
 {:type :s3
  :bucket "opencode-uploads"
  :region "us-east-1"
  :access-key #secret "aws_access_key"
  :secret-key #secret "aws_secret_key"
  :public-url-base "https://cdn.opencode.dev"}

 :themes
 {:default :opencode
  :available #{:opencode :github-dark :github-light :dracula :tokyo-night}
  :custom-themes-enabled? true}

 :experimental
 {:enabled? false
  :features #{:auto-save :vim-mode :copilot-integration}}}
